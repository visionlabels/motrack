<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tools for Multiple Object Tracking experiments • motrack</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Multiple Object Tracking experiments">
<meta name="description" content="For MOT experiments, you need to prepare trajectories, which objects later follow. This set of tools helps with random generation of trajectories, visualizing for inspection and adding simple physics like bouncing.">
<meta property="og:description" content="For MOT experiments, you need to prepare trajectories, which objects later follow. This set of tools helps with random generation of trajectories, visualizing for inspection and adding simple physics like bouncing.">
<meta property="og:image" content="https://visionlabels.github.io/motrack/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">motrack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="motrack---tools-for-multiple-object-tracking">motrack - tools for Multiple Object Tracking<a class="anchor" aria-label="anchor" href="#motrack---tools-for-multiple-object-tracking"></a>
</h1>
</div>
<!-- badges: start -->

<p><a href="http://www.scholarpedia.org/article/Multiple_object_tracking" class="external-link">Multiple Object Tracking</a> is a popular experimental paradigm used in visual attention research. Your goal is to remember several objects and keep track of the them while they move (<a href="https://youtu.be/lAQM4QJRYV8" class="external-link">demo</a>).</p>
<p>This package allows researcher to generate object trajectories, visualize them and export them for experiments. The trajectory and position data are in <code>tibble</code> format for easy further manipulation.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package is in active development. You can install the current version from GitHub with following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install devtools package if necessary</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">"devtools"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install the stable verion from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"visionlabels/motrack"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Let us create a trajectory or two:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://visionlabels.github.io/motrack/">motrack</a></span><span class="op">)</span> <span class="co">#load the package</span></span>
<span></span>
<span><span class="co"># we want objects starting </span></span>
<span><span class="co"># more further from the arena border and further from each other</span></span>
<span><span class="va">sett_generate</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">7</span>, <span class="fl">7</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">7</span>, <span class="fl">7</span><span class="op">)</span>, min_distance <span class="op">=</span> <span class="fl">2</span>,</span>
<span>               arena_shape <span class="op">=</span> <span class="st">"circle"</span><span class="op">)</span></span>
<span><span class="co"># they can move in a circular arena, bounce off borders and other objects</span></span>
<span><span class="va">sett_move</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>speed <span class="op">=</span> <span class="fl">5</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9</span>, <span class="fl">9</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9</span>, <span class="fl">9</span><span class="op">)</span>,</span>
<span>               bounce_off_square <span class="op">=</span> <span class="cn">F</span>,</span>
<span>               bounce_off_circle <span class="op">=</span> <span class="cn">T</span>, circle_bounce_jitter <span class="op">=</span> <span class="va">pi</span> <span class="op">/</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="co"># here you can separately adjust settings for visualization</span></span>
<span><span class="va">sett_show</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>show_labels <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set seed for replicability</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1001</span><span class="op">)</span></span>
<span></span>
<span><span class="va">position</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_positions_random.html">generate_positions_random</a></span><span class="op">(</span><span class="fl">8</span>, <span class="va">sett_generate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># our starting positions</span></span>
<span><span class="fu"><a href="reference/plot_position.html">plot_position</a></span><span class="op">(</span><span class="va">position</span>, <span class="va">sett_move</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make objects move for 8 seconds (0 to 8), adjust direction every 100 ms</span></span>
<span><span class="va">timescale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">8</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Objects only bounce</span></span>
<span><span class="va">trajectory_d</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="reference/make_random_trajectory.html">make_random_trajectory</a></span><span class="op">(</span><span class="va">position</span>, <span class="va">timescale</span>, <span class="va">sett_move</span>, </span>
<span>    <span class="va">step_direct</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Object change direction randomly every 0.5-1.5 seconds</span></span>
<span><span class="va">trajectory_z</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="reference/make_random_trajectory.html">make_random_trajectory</a></span><span class="op">(</span><span class="va">position</span>, <span class="va">timescale</span>, <span class="va">sett_move</span>, </span>
<span>    <span class="va">step_zigzag</span>, ttt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">1.5</span><span class="op">)</span>, syncstart <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Object change direction smoothly</span></span>
<span><span class="va">trajectory_v</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="reference/make_random_trajectory.html">make_random_trajectory</a></span><span class="op">(</span><span class="va">position</span>, <span class="va">timescale</span>, <span class="va">sett_move</span>, </span>
<span>    <span class="va">step_vonmises</span>, kappa <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_trajectory.html">plot_trajectory</a></span><span class="op">(</span><span class="va">trajectory_d</span>, <span class="va">sett_show</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_trajectory.html">plot_trajectory</a></span><span class="op">(</span><span class="va">trajectory_z</span>, <span class="va">sett_show</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_trajectory.html">plot_trajectory</a></span><span class="op">(</span><span class="va">trajectory_v</span>, <span class="va">sett_show</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># It is possible to implement complex motion patterns:</span></span>
<span><span class="co"># Object move for 0.5-1.5 seconds or wait for 0.2-0.5 seconds. </span></span>
<span><span class="co"># After movement/waiting, it waits with probability 0.1, </span></span>
<span><span class="co"># otherwise it changes direction randomly</span></span>
<span><span class="va">trajectory_wm</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="reference/make_random_trajectory.html">make_random_trajectory</a></span><span class="op">(</span></span>
<span>    <span class="va">position</span>, <span class="va">timescale</span>, <span class="va">sett_move</span>, </span>
<span>    <span class="va">step_waitandmove</span>, move_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">1.5</span><span class="op">)</span>, </span>
<span>    wait_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.2</span>,<span class="fl">.5</span><span class="op">)</span>, wait_prob <span class="op">=</span> <span class="fl">0.1</span>, syncstart <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># It is possible to vary speed during the trial based on the custom function</span></span>
<span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">time</span>, <span class="va">moment</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fl">5</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">time</span> <span class="op">+</span> <span class="va">moment</span><span class="op">$</span><span class="va">object</span><span class="op">)</span> <span class="co"># different offset for each object</span></span>
<span><span class="op">}</span></span>
<span><span class="va">sett_move</span><span class="op">$</span><span class="va">speed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trajectory_s</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="reference/make_random_trajectory.html">make_random_trajectory</a></span><span class="op">(</span></span>
<span>    <span class="va">position</span>, <span class="va">timescale</span>, <span class="va">sett_move</span>, <span class="va">step_direct</span><span class="op">)</span></span></code></pre></div>
<p>If you have <code>ffmpeg</code> installed, you can use <code>animation</code> package to render videos.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">animation</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/animation/man/ani.options.html" class="external-link">ani.options</a></span><span class="op">(</span>ffmpeg <span class="op">=</span> <span class="st">"/usr/bin/ffmpeg"</span><span class="op">)</span>   <span class="co"># update to your path</span></span>
<span></span>
<span><span class="fu"><a href="reference/render_trajectory_video.html">render_trajectory_video</a></span><span class="op">(</span><span class="st">"trajectory_d.mp4"</span>, <span class="va">trajectory_d</span>, </span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>show_labels <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, targets <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/render_trajectory_video.html">render_trajectory_video</a></span><span class="op">(</span><span class="st">"trajectory_z.mp4"</span>, <span class="va">trajectory_z</span>, </span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>show_labels <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, targets <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/render_trajectory_video.html">render_trajectory_video</a></span><span class="op">(</span><span class="st">"trajectory_v.mp4"</span>, <span class="va">trajectory_v</span>, </span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>show_labels <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, targets <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># variable speed example</span></span>
<span><span class="fu"><a href="reference/render_trajectory_video.html">render_trajectory_video</a></span><span class="op">(</span><span class="st">"trajectory_s.mp4"</span>, <span class="va">trajectory_s</span>, </span>
<span>  <span class="fu"><a href="reference/new_settings.html">new_settings</a></span><span class="op">(</span>show_labels <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, targets <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing motrack</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jiri Lukavsky <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1082-229X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/visionlabels/motrack/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/visionlabels/motrack/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jiri Lukavsky.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
